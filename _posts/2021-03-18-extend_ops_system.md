---
layout: post
title: 如何设计一个可靠的、易扩展与维护的系统
image: /img/data_system.png
tag: [数据中台,数据系统]
---
Talk is not cheap. Talk can be powerful.    ——来自网络

## 可靠的系统

我们如何设计一个可靠的系统呢？这是所有应用开发人员都要考虑的问题。早些年的时候，新闻里都时不时的报道很多因为应用系统的不可靠导致公司、政府机构、甚至现如今的商家，当然还有一些个体户遭受损失。我并没有危言耸听，因为这样的错误，不可避免地，无时无刻地发生着，或许你觉得离你很远，但是在如今这个万物互联的社会没有一个人能逃脱。首先，声明一下。在这篇内容里，我不讨论因为hack导致的系统宕机以及服务不可用，这样一个属于系统安全范畴的题目，应该由系统安全人员来给我们讲述，如何和hacker斗智斗勇。

我们可以思考一下，什么才是系统的“可靠"？难道仅仅是因为系统能够顺利的运行，没有明显的BUG？或者稳定不宕机，能处理大量的QPS？这些似乎只是KPI要考虑的事情。不是一个正当的讨论议题。就像你不能把所有的学术讨论最终只是落实到如何找到一份好的工作。以前，我们总喜欢把拥有数据库、缓存、队列这样的功能分别归于不同的系统实现。我们习惯于在一个系统里只做一件事情。因为我们并不想花大量的时间来扩展其系统的其他能力。如果我们实现应用的场景只是停留在博客时代，那面对现如今我们这样的一个数据爆发的年代，过去的老旧系统就显得力不从心了。我很讨厌在一个系统里只做一件事情，这种既浪费资源也违背客观规律的做法，着实让我很难接受。在系统设计上更应该着眼于核心功能的关联性和其关键能力，甚至附加一些额外的功能操作也不为过，比如，Redis使用队列能力来解决客户端的并发连接， Apache Kafka也借鉴了mysql binlog原理来持久化队列的消息。

近年来，随着数据成为企业开发的灵魂，可以毫不夸张地讲，现如今开发的系统都是“数据系统"。如今的企业不再是产生数据的机器，而更需要会采集、处理、分析数据，数据与数据之间的交换能力显得更加紧迫。此刻，单一组件的系统就只能被集成较多有数据处理能力的功能，久而久之这单一的组件会变得越来越庞大以至于很难维护和扩展。当然，此时的数据系统会变得很不可靠，我们可能会因为一个小小BUG而浪费大量的资源来恢复，这里也包含了人力相关。

那么，如果你问我什么是一个可靠的系统？我觉得有几句话总结就够了，可靠的系统应具备，可达到的预期的结果，不可预知操作的容错能力及关键数据的恢复能力，防止未经授权的访问和滥用以及适应不同场景的系统负载能力。当然这些都可以被总结为，即使是发生了错误，系统也照常可以运行。

![我们希望数据系统具有的能力](/img/data_system.png)

## 影响因素
