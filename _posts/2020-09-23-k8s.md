---
layout: post
title: K8s的历史、技术分析及展望
image: /img/k8s.png
tag: [K8s, Centos]
---

语言边界就是世界的边界
—— 《逻辑哲学论》

## 一、K8s 的意义及由来

**Kubernates**，习惯上也称为 K8s。是一个开源系统，用于跨多个主机管理容器化的应用程序。 它提供了用于部署，维护和扩展应用程序的基本机制。Kubernetes 建立在 Google 十年半的经验之上，使用称为[Borg](https://research.google/pubs/pub43438/)(有兴趣可以了解一下)的系统大规模运行生产工作负载，并结合了社区中的最佳创意和实践。以上对 k8s 的描述我们都可以在 kubernates 的官方 github 项目 README 里找到相应的解释[https://github.com/kubernetes/kubernetes](https://github.com/kubernetes/kubernetes)。然而官方文档的解释更倾向于 Kubernetes 是一个可移植的，可扩展的开源平台，用于管理容器化的工作负载和服务，可促进声明式配置和自动化。 它拥有一个庞大且快速增长的生态系统。 而 Kubernetes 的服务，支持和工具广泛应用

### 历史插曲

在 Google 中 Kubernetes 的原始代号是 Project 7，是对《星际迷航》前博格角色["Seven of Nine"](https://en.wikipedia.org/wiki/Seven_of_Nine)的引用。Kubernetes 徽标上的七个辐条是对该代号的引用。 最初的 Borg 项目完全是用 C ++ 编写的，但是重写的 Kubernetes 系统是在 Go 中实现的。

---

**下面从以下几个方面对 k8s 展开论述**，首先声明，我对任何技术的分析尽量做到绝对的客观，但是个人的思考和见识不能除外，毕竟技术在某种意义上也是比较主观的。然而，对于那些主观的看法希望各位读者给予相应的宽容抑或相应的建议。笔者亦倍感欣慰、故在此深表感意。

## 二、技术优势

### 1.1 容器化技术的流行

我们来看看这些年来，应用在部署机制上的演变历程。这些年我们可以粗略的归纳为三个应用部署时代。传统部署时代，虚拟化部署时代，容器化部署时代。他们各自有各自的架构实现，如下图所示。

![应用部署发展历程](/img/deploy.png)

以及各自的优劣，如下图。

![应用部署各时代优劣](/img/deployAD.png)

那么容器化真正流行起来的因素有哪些呢，或者他有哪些真正能解决问题的点呢？如下图。

![容器化部署的优势](/img/containers.png)

说了这么多容器化部署的优点，那书归正传，请出今天的主角，K8s。为什么需要它，或者它能为我们做什么呢？

### 1.2 为什么需要k8s，它能为我们做什么呢

首先容器是应用程序打包和运行的最好方式。在生产环境中，你需要管理这些容器，保证容器的稳定、不宕机的运行。那么你就需要一个管理容器的利器——k8s。

它能提供的服务有哪些呢？如下图。

![k8s提供的服务](/img/k8sservice.png)

顺便说下，k8s类似于传统的Pass平台但和它却有相当大的差别。k8s的运行是基于容器级别而非硬件级别，提供构建开发人员平台的基础，但保留了用户的选择和灵活性。比如，不限制支持的应用程序类型，不部署源代码，不提供程序级别的内置服务，中间件等，不指定日志记录，不提供采用任何全面管理的机器配置、维护、管理、或者自我修复。它不仅仅是编排系统，实际上它消除了编排的需要。编排的技术定义是执行定义的工作流程。比如，从A到B再到C的执行顺序。相反，k8s包含一组独立的、可组合的控制过程。这些过程连续地将当前状态驱动到所提供的所需状态。无需关注从A到C的执行顺序，也不需要集中控制。（解释一下，K8s容器应用之间的状态通信是通过注册来发现的，所以我们把每个容器来看的话，就没必要关注容器的启动顺序，这些服务的状态都会记录在注册机上，一旦识别服务状态可用自然会加入到集群中来，然而整个过程都是由k8s的controller来完成的）这使得系统功能更强大、健壮、弹性和可扩展性。
**好的，我们已经讲解了容器化部署历程以及典型的容器化管理工具——k8s的意义和使用场景。那接下来，我们将进入本片的重头戏——聊聊k8s的架构**

### 1.3 K8s的基础架构

首先由一张图来引入K8s的架构，如下图所示。

![k8s提供的服务](/img/k8sarch.png)

接着我会细致的描述里面各个组件的意义和关系。

#### 1.3.1 k8s的控制面

控制面是k8s集群的重要组成部分，在*控制面*里可以找到kubernetes控制集群的相关组件，还有一些集群的状态和配置的数据。这些核心的组件是保证集群稳定运行以及分配资源的重要利器。

- kube-apiserver

kube-apiserver，可以理解为控制面的暴露的前端接口，用于处理内部和外部请求。可以同过REST方式访问API或者使用kubectl来调用

- kube-scheduler

kube-scheduler, 

#### 1.3.2 k8s的node

#### 1.3.2 K8s集群还需要什么

---

## 三、存在的不足

---

## 四、未来的规划

---

## 五、日后所要面对的挑战
